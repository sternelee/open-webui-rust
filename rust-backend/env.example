# Server Configuration
HOST=0.0.0.0
PORT=8080
ENV=production
WEBUI_SECRET_KEY=

# Database Configuration (PostgreSQL only)
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/openwebui
DATABASE_POOL_SIZE=10
DATABASE_POOL_MAX_OVERFLOW=10
DATABASE_POOL_TIMEOUT=30
DATABASE_POOL_RECYCLE=3600

# Redis Configuration (Optional)
REDIS_URL=redis://localhost:6379
ENABLE_REDIS=false

# Authentication
JWT_EXPIRES_IN=168h
ENABLE_SIGNUP=true
ENABLE_LOGIN_FORM=true
ENABLE_API_KEY=true

####################################
# OAuth Authentication
####################################

# General OAuth Settings
ENABLE_OAUTH_SIGNUP=false
OAUTH_MERGE_ACCOUNTS_BY_EMAIL=false
ENABLE_OAUTH_PERSISTENT_CONFIG=false

# Frontend URL (used for OAuth redirects)
FRONTEND_BASE_URL=http://localhost:3000

# OAuth Session Encryption (REQUIRED if using OAuth)
# Generate a secure Fernet key using: python3 -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
OAUTH_SESSION_TOKEN_ENCRYPTION_KEY=

# OAuth Client Info Encryption (for MCP tools)
OAUTH_CLIENT_INFO_ENCRYPTION_KEY=

# ID Token Cookie (optional)
ENABLE_OAUTH_ID_TOKEN_COOKIE=false

####################################
# OAuth Provider - Google
####################################
# Get credentials from: https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GOOGLE_OAUTH_SCOPE=openid email profile
GOOGLE_REDIRECT_URI=http://localhost:8080/oauth/google/callback

####################################
# OAuth Provider - Microsoft
####################################
# Get credentials from: https://portal.azure.com/#blade/Microsoft_AAD_RegisteredApps/ApplicationsListBlade
MICROSOFT_CLIENT_ID=
MICROSOFT_CLIENT_SECRET=
MICROSOFT_CLIENT_TENANT_ID=common
MICROSOFT_OAUTH_SCOPE=openid email profile
MICROSOFT_REDIRECT_URI=http://localhost:8080/oauth/microsoft/callback

####################################
# OAuth Provider - GitHub
####################################
# Get credentials from: https://github.com/settings/developers
GITHUB_CLIENT_ID=
GITHUB_CLIENT_SECRET=
GITHUB_OAUTH_SCOPE=read:user user:email
GITHUB_REDIRECT_URI=http://localhost:8080/oauth/github/callback

####################################
# OAuth Provider - Generic OIDC
####################################
# Use for Keycloak, Auth0, Okta, etc.
OIDC_PROVIDER_NAME=OIDC
OIDC_CLIENT_ID=
OIDC_CLIENT_SECRET=
OIDC_DISCOVERY_URL=
OIDC_OAUTH_SCOPE=openid email profile
OIDC_REDIRECT_URI=http://localhost:8080/oauth/oidc/callback

####################################
# OAuth Provider - Feishu/Lark
####################################
# Get credentials from: https://open.feishu.cn/app
FEISHU_CLIENT_ID=
FEISHU_CLIENT_SECRET=
FEISHU_OAUTH_SCOPE=contact:user.base:readonly
FEISHU_REDIRECT_URI=http://localhost:8080/oauth/feishu/callback

####################################
# OAuth Claims Mapping
####################################
# Customize which OAuth claims to use for user data
OAUTH_USERNAME_CLAIM=name
OAUTH_EMAIL_CLAIM=email
OAUTH_PICTURE_URL_CLAIM=picture

# Role management from OAuth claims
OAUTH_ROLES_CLAIM=roles
OAUTH_ALLOWED_ROLES=user,admin
OAUTH_ADMIN_ROLES=admin

# Group management from OAuth claims
OAUTH_GROUPS_CLAIM=groups
OAUTH_ALLOWED_GROUPS=
OAUTH_BLOCKED_GROUPS=

####################################
# OAuth Role Management
####################################
# Default role for new OAuth users
DEFAULT_USER_ROLE=pending

# Email domain restrictions
OAUTH_ALLOWED_DOMAINS=
# Example: OAUTH_ALLOWED_DOMAINS=company.com,example.org

# First user becomes admin
ENABLE_OAUTH_FIRST_USER_ADMIN=true

####################################
# OAuth Security
####################################
# Enable PKCE (Proof Key for Code Exchange) - Recommended
ENABLE_OAUTH_PKCE=true

# Profile picture size limit (in bytes)
OAUTH_PROFILE_PICTURE_MAX_SIZE=2097152

####################################
# OAuth Webhooks
####################################
# Webhook notifications for OAuth events
WEBHOOK_URL=
# Example: WEBHOOK_URL=https://your-server.com/webhook

# CORS
CORS_ALLOW_ORIGIN=*

# WebSocket
ENABLE_WEBSOCKET_SUPPORT=true
WEBSOCKET_MANAGER=local
# WEBSOCKET_MANAGER=redis
# WEBSOCKET_REDIS_URL=redis://localhost:6379

# Features
ENABLE_OPENAI_API=true
ENABLE_CHANNELS=false
ENABLE_IMAGE_GENERATION=false
ENABLE_CODE_EXECUTION=false
ENABLE_WEB_SEARCH=false

# Storage
UPLOAD_DIR=/app/data/uploads

# Logging
RUST_LOG=info
GLOBAL_LOG_LEVEL=INFO

